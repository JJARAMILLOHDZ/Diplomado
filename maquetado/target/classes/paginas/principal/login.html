<!DOCTYPE html>
<html lang="en">
<html xmlns:th="http://www.thymeleaf.org"
      lang="es">
<head th:replace="~{plantillas/plantilla :: head}">

    <style>
        body {
            background-color: #f8f9fa;
        }
        .login-container {
            max-width: 400px;
            margin: 100px auto;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }
        .form-control:focus {
            border-color: #80bdff;
            box-shadow: 0 0 0 0.25rem rgba(0,123,255,0.25);
        }
        .btn-login {
            width: 100%;
            padding: 10px;
        }
        .invalid-feedback {
            display: none;
            color: #dc3545;
        }
        .was-validated .form-control:invalid ~ .invalid-feedback {
            display: block;
        }
    </style>
</head>
<body >

<header th:replace="~{plantillas/plantilla :: header}"></header>
<br>
<br>
<div class="d-flex justify-content-center">
    <img src="/image/colelin.png" alt="Logo" >
</div>
<br>
<br>
<div class=" d-flex justify-content-center align-items-center " >

    <div class="bg-white p-5 rounded-5 text-secondary shadow"
        style="width: 25rem">

        <div class="text-center fs-1 fw-bold">Acceder</div>
        <form id="loginForm" th:action="@{acceder}" th:object="${usuario}" method="post" class="needs-validation" novalidate >
            <div th:if="${#fields.hasErrors('*')}" class='alert alert-danger' role="alert">
                Acceso denegado, favor de revisar sus datos
                <ul>
                    <li th:each="err : ${#fields.errors('*')}" th:text="${err}"></li>
                </ul>
            </div>
            <div class="input-group mt-4">
                <div class="input-group-text ">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
                        <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/>
                    </svg>
                </div>
                <input class="form-control bg-light" th:field="*{nombre}"
                        type="text" id="nombre"
                        placeholder="Usuario" required
                />
                <div class="invalid-feedback" >
                    Por favor ingresa tu nombre de usuario.
                </div>
            </div>
            <div class="input-group mt-1">
                <div class="input-group-text bg-info">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-key-fill" viewBox="0 0 16 16">
                        <path d="M3.5 11.5a3.5 3.5 0 1 1 3.163-5H14L15.5 8 14 9.5l-1-1-1 1-1-1-1 1-1-1-1 1H6.663a3.5 3.5 0 0 1-3.163 2M2.5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/>
                    </svg>
                </div>
                <input
                        class="form-control bg-light" th:field="*{password}"
                        type="password"
                        placeholder="Contraseña" id="password" required
                />
                <div class="invalid-feedback" >
                    Por favor ingresa tu contraseña.
                </div>
            </div>
            <div class="d-flex justify-content-around mt-1">
                <div class="pt-1">
                    <a
                            href="#"
                            class="text-decoration-none text-info fw-semibold fst-italic"
                            style="font-size: 0.9rem"
                    >Olvide mi contraseña</a
                    >
                </div>
            </div>
            <div class="btn  text-white w-100 mt-4 fw-semibold shadow-sm">
                <button type="submit" class="btn btn-primary btn-lg"  >Acceder</button>
            </div>
        </form>
    <div class="d-flex gap-1 justify-content-center mt-1">
        <a th:href="@{/crearCuenta/registro}" class="text-decoration-none text-info fw-semibold"
        >Crear cuenta</a
        >
    </div>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Validación del formulario -->
<script>
    (function() {
        'use strict';

        // Obtener el formulario
        var form = document.getElementById('loginForm');

        // Escuchar el evento submit
        form.addEventListener('submit', function(event) {
            // Verificar si el formulario es válido
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
            }

            // Agregar clase de validación
            form.classList.add('was-validated');

            // Si es válido, puedes enviar el formulario o hacer una petición AJAX
            if (form.checkValidity()) {
                // Aquí puedes agregar el código para enviar los datos
                alert('Formulario válido. Usuario: ' + document.getElementById('username').value);
                // event.target.submit(); // Descomenta para enviar el formulario realmente
            }
        }, false);
    })();
</script>
</body>
</html>